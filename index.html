<!DOCTYPE html>
<html lang="en">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js" integrity="sha512-90vH1Z83AJY9DmlWa8WkjkV79yfS2n2Oxhsi2dZbIv0nC4E6m5AbH8Nh156kkM7JePmqD6tcZsfad1ueoaovww==" crossorigin="anonymous"></script>
	<script src="js/three.min.js"></script>
    <script src="js/OrbitControls.js"></script>

	<body>
		<video id="video" loop style="display: none;" crossorigin="anonymous">
			<source src="https://cdn.glitch.com/63835658-c637-44c1-a2d9-117a51330e43%2Fsample.MP4?v=1608128163616" type="video/mp4">
			Not supported
		</video>
    <button id="btn">
      play
    </button>

		<script>

			let camera, scene, renderer, plane;

			init();
			function init() {
				const container = document.createElement( 'div' );
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 45, 1, 1, 2000 );
				camera.position.set( 0, 200, 0 );
				camera.rotation.set( -Math.PI / 2, 0, 0 );

				scene = new THREE.Scene();
				scene.background = new THREE.Color( 0xa0a0a0 );

				// plane
				planes = [];
				var tex = new THREE.VideoTexture(video);
				var geo = new THREE.PlaneGeometry( 60, 60, 32);
				var mat = new THREE.MeshBasicMaterial( {
					side: THREE.DoubleSide,
					map: tex
				} );

				plane = new THREE.Mesh(geo, mat);
				plane.rotation.x = -Math.PI / 2;
				plane.scale.x = 9 / 10.0;
				plane.move = function() {
					this.position.x = _.random(-120, 120);
					this.position.z = _.random(-120, 120);
				}
				scene.add( plane );
				planes.push(plane);
				
				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize(500, 500);

				renderer.outputEncoding = THREE.sRGBEncoding;
				container.appendChild( renderer.domElement );

				// const controls = new THREE.OrbitControls( camera, renderer.domElement );

				renderer.setAnimationLoop( function () {
					renderer.render( scene, camera );
					_.sample(planes).move();
					// controls.update();
				} );

			}

		</script>

	</body>
</html>
